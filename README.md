# iOS Scriptable Stock Widget

<div align="center">

ğŸ“Š iOS Scriptable Widget for Stock Turnover Rankings

ä¸€å€‹åŸºæ–¼ Scriptable çš„ iOS å°çµ„ä»¶ï¼Œå³æ™‚é¡¯ç¤ºæ¸¯è‚¡/ç¾è‚¡æˆäº¤é¡æ’è¡Œ

[åŠŸèƒ½ç‰¹è‰²](#-åŠŸèƒ½ç‰¹è‰²) â€¢ [å®‰è£æ–¹æ³•](#-å®‰è£æ–¹æ³•) â€¢ [ä½¿ç”¨èªªæ˜](#-ä½¿ç”¨èªªæ˜) â€¢ [é…ç½®é¸é …](#ï¸-é…ç½®é¸é …)

</div>

---

## âœ¨ åŠŸèƒ½ç‰¹è‰²

- ğŸ¯ **è‡ªé¸è‚¡ç¥¨è¿½è¹¤** - æ”¯æ´è‡ªå®šç¾©è‚¡ç¥¨æ¸…å–®ï¼Œæ™ºèƒ½é›™æ¨¡å¼åˆ‡æ›
- ğŸ”„ **æ™ºèƒ½é›™æ¨¡å¼** - è‡ªé¸æ¨¡å¼å„ªå…ˆï¼Œç„¡è‡ªé¸æ™‚è‡ªå‹•å›é€€æ’è¡Œæ¦œæ¨¡å¼
- ğŸŒ **è‡ªå‹•å¸‚å ´è­˜åˆ¥** - ç´”æ•¸å­—â†’æ¸¯è‚¡ï¼ŒåŒ…å«å­—æ¯â†’ç¾è‚¡ï¼Œå®Œå…¨è‡ªå‹•åŒ–
- ğŸ“ˆ **å³æ™‚ K ç·šåœ–** - é¡¯ç¤ºç•¶æ—¥ OHLC æ•¸æ“šï¼Œç¶ æ¼²ç´…è·Œé…è‰²
- ğŸ¨ **éšæ¢¯å¼é…è‰²** - æ¼²è·Œå¹… 5 ç´šæ¼¸è®Šè‰²å½©ï¼Œä¸€çœ¼è¾¨è­˜å¸‚å ´ç†±åº¦
- ğŸ¯ **æ™ºèƒ½ç”¢æ¥­åˆ†é¡** - Lbkrs æ•¸æ“šæºï¼ŒETF é¡¯ç¤ºå®Œæ•´åç¨±ï¼Œè‚¡ç¥¨é¡¯ç¤ºå¯¦éš›è¡Œæ¥­
- ğŸ’§ **é‡æ¯”åˆ†æ** - å†·â†’ç†±æ¼¸è®Šè‰²å½©é¡¯ç¤ºæˆäº¤é‡è®ŠåŒ–
- âš¡ **é«˜æ•ˆå¿«å–** - å°ˆæ¥­åŒ–å¿«å–ç­–ç•¥ï¼Œæå‡è¼‰å…¥é€Ÿåº¦
- ğŸŒ™ **æ·±æ·ºæ¨¡å¼** - è‡ªå‹•é©é… iOS æ·±æ·ºè‰²ä¸»é¡Œ
- ğŸ”§ **å¤šè¼ªå˜—è©¦æ©Ÿåˆ¶** - æ™ºèƒ½ä¿®æ­£æµç¨‹ï¼Œæ”¯æ´ä»»æ„æ–°ETFä»£ç¢¼
- ğŸš€ **å‹•æ…‹ä¸¦ç™¼æ§åˆ¶** - æ ¹æ“šè‚¡ç¥¨æ•¸é‡è‡ªå‹•èª¿æ•´ä¸¦ç™¼æ•¸
- ğŸ—ï¸ **æ¨¡çµ„åŒ–æ¶æ§‹** - å·¥å…·é¡è¨­è¨ˆï¼Œæ˜“æ–¼ç¶­è­·å’Œæ“´å±•

## ğŸ“± é è¦½

### è‡ªé¸è‚¡ç¥¨æ¨¡å¼
```
æ›´æ–°æ™‚é–“    åç¨±/ä»£è™Ÿ      Kç·š  æ¼²è·Œ%    åƒ¹æ ¼    æˆäº¤é¡  é‡æ¯”
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
åŠå°é«”     NVDA          ğŸ“Š  +3.58%  181.57  13.79B  1.88
é‡‘èæœå‹™   é¨°è¨Šæ§è‚¡      ğŸ“Š  +2.15%  385.20  123.5å„„ 1.25
ç§‘æŠ€       TSLA          ğŸ“Š  -2.15%  242.30   8.92B  2.34
...
```

### ç¾è‚¡æ’è¡Œæ¦œæ¨¡å¼
```
æ›´æ–°æ™‚é–“    ä»£è™Ÿ    Kç·š  æ¼²è·Œ%    åƒ¹æ ¼    æˆäº¤é¡  é‡æ¯”
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
åŠå°é«”     NVDA    ğŸ“Š  +3.58%  181.57  13.79B  1.88
ç§‘æŠ€       TSLA    ğŸ“Š  -2.15%  242.30   8.92B  2.34
...
```

### æ¸¯è‚¡æ’è¡Œæ¦œæ¨¡å¼
```
æ›´æ–°æ™‚é–“    åç¨±        Kç·š  æ¼²è·Œ%    åƒ¹æ ¼    æˆäº¤é¡  é‡æ¯”
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
é‡‘èæœå‹™   é¨°è¨Šæ§è‚¡    ğŸ“Š  +2.15%  385.20  123.5å„„ 1.25
é›»è¨Š       ä¸­åœ‹ç§»å‹•    ğŸ“Š  -0.82%   68.50   45.2å„„ 0.89
...
```

## ğŸš€ å®‰è£æ–¹æ³•

### 1. å®‰è£ Scriptable App
å¾ App Store ä¸‹è¼‰ [Scriptable](https://apps.apple.com/app/scriptable/id1405459188)

### 2. ä¸‹è¼‰è…³æœ¬
```bash
# ä¸‹è¼‰ Widget.js
# æ–¹æ³• 1: ä½¿ç”¨ Git
git clone https://github.com/hin88188/ios-scriptable-stock-widget.git

# æ–¹æ³• 2: ç›´æ¥ä¸‹è¼‰
# è¨ªå• GitHub é é¢ï¼Œé»æ“Š "Code" â†’ "Download ZIP"
```

### 3. åŒ¯å…¥è…³æœ¬
1. æ‰“é–‹ Scriptable App
2. é»æ“Šå³ä¸Šè§’ `+` æ–°å¢è…³æœ¬
3. è¤‡è£½ `Widget.js` çš„å…§å®¹
4. è²¼ä¸Šä¸¦å„²å­˜ï¼ˆå‘½åç‚º "Turnover"ï¼‰

### 4. æ·»åŠ  Widget
1. é•·æŒ‰ iOS ä¸»ç•«é¢ç©ºç™½è™•
2. é»æ“Šå·¦ä¸Šè§’ `+`
3. æœå°‹ä¸¦é¸æ“‡ "Scriptable"
4. é¸æ“‡ **Large** å°ºå¯¸
5. é•·æŒ‰ Widget â†’ ç·¨è¼¯å°çµ„ä»¶
6. Script é¸æ“‡ "Turnover"
7. When Interacting é¸æ“‡ "Run Script"

## ğŸ“– ä½¿ç”¨èªªæ˜

### æ™ºèƒ½é›™æ¨¡å¼

#### è‡ªé¸è‚¡ç¥¨æ¨¡å¼
```javascript
// åœ¨ CONFIG ä¸­è¨­å®šè‡ªé¸è‚¡ç¥¨æ¸…å–®
CUSTOM_WATCHLIST: [
    'AAPL',    // ç¾è‚¡ä»£è™Ÿ
    '00700',   // æ¸¯è‚¡ä»£è™Ÿ
    'NVDA',    // ç¾è‚¡ä»£è™Ÿ
    'SPY'      // ç¾è‚¡ETF
]
```

**ç‰¹é»**ï¼š
- è‡ªå‹•è­˜åˆ¥å¸‚å ´ï¼šç´”æ•¸å­—â†’æ¸¯è‚¡ï¼ŒåŒ…å«å­—æ¯â†’ç¾è‚¡
- æ··åˆå¸‚å ´é¡¯ç¤ºï¼šç¾è‚¡é¡¯ç¤ºä»£è™Ÿï¼Œæ¸¯è‚¡é¡¯ç¤ºä¸­æ–‡åç¨±
- æŒ‰ç”¨æˆ¶é…ç½®é †åºé¡¯ç¤º
- æ”¯æ´ä»»æ„æ–°ETFä»£ç¢¼

#### æ’è¡Œæ¦œæ¨¡å¼
```javascript
// ä¸è¨­å®š CUSTOM_WATCHLIST æˆ–è¨­ç‚ºç©ºé™£åˆ—
CUSTOM_WATCHLIST: []
```

**ç‰¹é»**ï¼š
- è‡ªå‹•å¸‚å ´åˆ‡æ›ï¼šæ ¹æ“šé–‹ç›¤æ™‚é–“æ™ºæ…§åˆ¤æ–·
- æŒ‰æˆäº¤é¡æ’åºé¡¯ç¤º
- æ”¯æ´ç¾è‚¡/æ¸¯è‚¡æ’è¡Œæ¦œ

### å¸‚å ´æ¨¡å¼
```javascript
MARKET: 'AUTO'  // è‡ªå‹•åˆ‡æ›ï¼ˆæ¨è–¦ï¼‰
MARKET: 'US'    // å›ºå®šç¾è‚¡
MARKET: 'HK'    // å›ºå®šæ¸¯è‚¡
```

### èª¿è©¦æ¨¡å¼
```javascript
DEBUG_MODE: false  // ç”Ÿç”¢ç’°å¢ƒï¼ˆé è¨­ï¼‰
DEBUG_MODE: true   // èª¿è©¦æ¨¡å¼ï¼ˆä¿ç•™åŸå§‹æ•¸æ“šï¼‰
```

### è‡ªå‹•åˆ‡æ›é‚è¼¯
- **é–‹ç›¤ä¸­**: å„ªå…ˆé¡¯ç¤ºé–‹ç›¤ä¸­çš„å¸‚å ´
- **å…©å¸‚éƒ½æ”¶ç›¤**: æ ¹æ“šæ™‚æ®µæ™ºæ…§åˆ¤æ–·
  - æ¸¯è‚¡æ”¶ç›¤å¾Œï¼ˆ16:01-21:29ï¼‰â†’ é¡¯ç¤ºæ¸¯è‚¡
  - ç¾è‚¡æ”¶ç›¤å¾Œï¼ˆ04:01-09:29ï¼‰â†’ é¡¯ç¤ºç¾è‚¡
- **é€±æœ«**: é¡¯ç¤ºé€±äº”ç¾è‚¡è³‡æ–™

## âš™ï¸ é…ç½®é¸é …

### åŸºæœ¬è¨­å®š
```javascript
const CONFIG = {
    // å¸‚å ´é¸æ“‡
    MARKET: 'AUTO',           // 'AUTO' | 'US' | 'HK'
    
    // è‡ªé¸è‚¡ç¥¨é…ç½®
    CUSTOM_WATCHLIST: [
        'AAPL',    // ç¾è‚¡ä»£è™Ÿ
        '00700',   // æ¸¯è‚¡ä»£è™Ÿ
        'NVDA',    // ç¾è‚¡ä»£è™Ÿ
        'SPY'      // ç¾è‚¡ETF
    ],
    
    // é¡¯ç¤ºæ§åˆ¶
    SHOW_STOCK: true,         // é¡¯ç¤ºè‚¡ç¥¨
    SHOW_ETF: true,           // é¡¯ç¤º ETF
    MAX_ITEMS: 21,            // æœ€å¤šé¡¯ç¤ºç­†æ•¸ï¼ˆå»ºè­° â‰¤ 21ï¼‰
    FONT_SIZE: 12,            // å­—é«”å¤§å°
    
    // èª¿è©¦æ¨¡å¼
    DEBUG_MODE: false,        // æ˜¯å¦ä¿ç•™åŸå§‹æ•¸æ“šï¼ˆé è¨­ falseï¼‰
    
    // å¿«å–æ™‚æ•ˆï¼ˆåˆ†é˜ï¼‰
    CACHE_DURATION: 1,        // ä¸»åˆ—è¡¨å’Œè‡ªé¸è‚¡ç¥¨
    KLINE_CACHE_DURATION: 1,  // K ç·šæ•¸æ“š
    
    // æ•ˆèƒ½è¨­å®š
    MAX_CONCURRENT_REQUESTS: 10,  // åŸºæº–ä¸¦ç™¼æ•¸
    REQUEST_RETRY_COUNT: 3,       // è«‹æ±‚é‡è©¦æ¬¡æ•¸
    REQUEST_TIMEOUT: 10000,       // è«‹æ±‚è¶…æ™‚ï¼ˆæ¯«ç§’ï¼‰
    
    // Cookieï¼ˆé¸å¡«ï¼‰
    COOKIES: '',  // å¦‚é‡æŠ“å–å•é¡Œå¯è¨­å®š
}
```

### K ç·šé…ç½®
```javascript
KLINE: {
    WIDTH: 8,              // Kç·šç¸½å¯¬åº¦
    HEIGHT: 12,            // Kç·šç¸½é«˜åº¦
    BODY_WIDTH: 8,         // å¯¦é«”å¯¬åº¦
    SHADOW_WIDTH: 1.5,     // å½±ç·šå¯¬åº¦
    GAIN_COLOR: '#00C46B',  // ç¶ è‰²ï¼ˆæ¼²ï¼‰
    LOSS_COLOR: '#FF3B3B',  // ç´…è‰²ï¼ˆè·Œï¼‰
    NEUTRAL_COLOR: '#CCCCCC' // ç°è‰²ï¼ˆå¹³ç›¤ï¼‰
}
```

### è‰²å½©ç³»çµ±
```javascript
// æ¼²è·Œå¹…éšæ¢¯é…è‰²
GAIN_LEVELS: {
    level5: '#008C4C',  // > +5%
    level4: '#00A85C',  // +3% ~ +5%
    level3: '#00C46B',  // +1.5% ~ +3%
    level2: '#4BD68D',  // +0.5% ~ +1.5%
    level1: '#9BE39E'   // +0% ~ +0.5%
}

// é‡æ¯”è‰²å½©ï¼ˆå†·â†’ç†±ï¼‰
VOLUME_RATIO_COLORS: {
    coldest: '#4B6B8A',  // < 0.5
    cold: '#3FA7D6',     // 0.5-1.5
    warm: '#6DD57E',     // 1.5-2.5
    hot: '#FFD54F',      // 2.5-5.0
    hottest: '#FF5252'   // > 5.0
}
```

### æ¬„ä½é…ç½®

#### ç¾è‚¡æ¬„ä½è¨­å®š
```javascript
COLUMN_SETTINGS_US: [
    { key: 'industry', header: '', width: 70, visible: true },
    { key: 'rank', header: '', width: 25, visible: false },
    { key: 'stockCode', header: 'ä»£è™Ÿ', width: 50, visible: true },
    { key: 'kline', header: '', width: 8, visible: true },
    { key: 'changeRatio', header: 'æ¼²è·Œ%', width: 55, visible: true },
    { key: 'currentPrice', header: 'åƒ¹æ ¼', width: 50, visible: true },
    { key: 'tradeTurnover', header: 'æˆäº¤é¡', width: 45, visible: true },
    { key: 'volumeRatio', header: 'é‡æ¯”', width: 30, visible: true }
]
```

#### æ¸¯è‚¡æ¬„ä½è¨­å®š
```javascript
COLUMN_SETTINGS_HK: [
    { key: 'industry', header: '', width: 70, visible: true },
    { key: 'rank', header: '', width: 25, visible: false },
    { key: 'stockName', header: 'åç¨±', width: 85, visible: true },
    { key: 'kline', header: '', width: 8, visible: true },
    { key: 'changeRatio', header: 'æ¼²è·Œ%', width: 50, visible: true },
    { key: 'currentPrice', header: 'åƒ¹æ ¼', width: 50, visible: true },
    { key: 'tradeTurnover', header: 'æˆäº¤é¡', width: 45, visible: true },
    { key: 'volumeRatio', header: 'é‡æ¯”', width: 30, visible: true }
]
```

#### æ··åˆå¸‚å ´è‡ªé¸è‚¡ç¥¨æ¬„ä½è¨­å®š
```javascript
COLUMN_SETTINGS_MIXED: [
    { key: 'industry', header: '', width: 70, visible: true },
    { key: 'rank', header: '', width: 25, visible: false },
    { key: 'stockDisplay', header: 'åç¨±/ä»£è™Ÿ', width: 85, visible: true },
    { key: 'kline', header: '', width: 8, visible: true },
    { key: 'changeRatio', header: 'æ¼²è·Œ%', width: 50, visible: true },
    { key: 'currentPrice', header: 'åƒ¹æ ¼', width: 50, visible: true },
    { key: 'tradeTurnover', header: 'æˆäº¤é¡', width: 45, visible: true },
    { key: 'volumeRatio', header: 'é‡æ¯”', width: 30, visible: true }
]
```

## ğŸ”§ å¸¸è¦‹å•é¡Œ

### Q: Widget é¡¯ç¤ºç©ºç™½ï¼Ÿ
**A**: æª¢æŸ¥ä»¥ä¸‹é …ç›®ï¼š
- Widget å°ºå¯¸å¿…é ˆç‚º **Large**
- ç¢ºèªå·²é¸æ“‡æ­£ç¢ºçš„è…³æœ¬
- æŸ¥çœ‹ Scriptable App å…§çš„ Console éŒ¯èª¤è¨Šæ¯
- å˜—è©¦åœ¨ App å…§ç›´æ¥åŸ·è¡Œè…³æœ¬æ¸¬è©¦

### Q: è³‡æ–™æŠ“å–å¤±æ•—ï¼Ÿ
**A**: å¯èƒ½åŸå› ï¼š
- ç¶²è·¯é€£ç·šå•é¡Œ
- ç¶²ç«™æš«æ™‚ç„¡æ³•è¨ªå•
- éœ€è¦è¨­å®š Cookieï¼ˆåœ¨é…ç½®ä¸­å¡«å…¥ï¼‰
- æª¢æŸ¥é™¤éŒ¯æª”æ¡ˆï¼šScriptable â†’ æª”æ¡ˆ â†’ `debug_*.txt`

### Q: è‡ªé¸è‚¡ç¥¨ä¸é¡¯ç¤ºï¼Ÿ
**A**: æª¢æŸ¥é …ç›®ï¼š
- ç¢ºèª `CUSTOM_WATCHLIST` é…ç½®æ­£ç¢º
- æª¢æŸ¥è‚¡ç¥¨ä»£ç¢¼æ ¼å¼ï¼ˆç¾è‚¡å­—æ¯ï¼Œæ¸¯è‚¡æ•¸å­—ï¼‰
- æŸ¥çœ‹ Console çš„è‡ªé¸è‚¡ç¥¨éŒ¯èª¤è¨Šæ¯
- æª¢æŸ¥é™¤éŒ¯æª”æ¡ˆ `debug_stock_${stockCode}_*.txt`

### Q: æ¨¡å¼åˆ‡æ›éŒ¯èª¤ï¼Ÿ
**A**: æª¢æŸ¥é …ç›®ï¼š
- ç¢ºèª `CUSTOM_WATCHLIST` æ˜¯å¦ç‚ºç©ºé™£åˆ—
- æª¢æŸ¥ `resolveDisplayMode()` å‡½å¼é‚è¼¯
- é©—è­‰ `CONFIG.MARKET` è¨­å®š
- æŸ¥çœ‹ Console çš„æ¨¡å¼æ±ºç­–æ—¥èªŒ

### Q: K ç·šåœ–ä¸é¡¯ç¤ºï¼Ÿ
**A**: æª¢æŸ¥é …ç›®ï¼š
- ç¢ºèªç¶²è·¯é€£ç·šæ­£å¸¸
- æŸ¥çœ‹ Console çš„éŒ¯èª¤è¨Šæ¯
- æª¢æŸ¥ `KLINE_CACHE_DURATION` è¨­å®š
- åˆªé™¤å¿«å–æª”æ¡ˆé‡æ–°æŠ“å–

### Q: å¿«å–å¦‚ä½•æ¸…é™¤ï¼Ÿ
**A**: 
1. æ‰“é–‹ Scriptable App
2. é»æ“Š "æª”æ¡ˆ" åœ–ç¤º
3. åˆªé™¤ `lbkrs_*.json` æª”æ¡ˆ

æˆ–ä½¿ç”¨ç¨‹å¼ç¢¼æ¸…é™¤ï¼š
```javascript
// åœ¨ Scriptable ä¸­åŸ·è¡Œ
const caches = {
    ranking: new RankingCache(CONFIG),
    watchlist: new WatchlistCache(CONFIG),
    kline: new KlineCache(CONFIG)
};

caches.watchlist.clear();  // æ¸…é™¤è‡ªé¸å¿«å–
caches.kline.clear();       // æ¸…é™¤ Kç·šå¿«å–
```

### Q: å¦‚ä½•èª¿æ•´é¡¯ç¤ºæ•¸é‡ï¼Ÿ
**A**: ä¿®æ”¹ `MAX_ITEMS` åƒæ•¸ï¼ˆå»ºè­° â‰¤ 21ï¼ŒLarge Widget é«˜åº¦é™åˆ¶ï¼‰

### Q: å¤šè¼ªå˜—è©¦æ©Ÿåˆ¶å¤±æ•ˆï¼Ÿ
**A**: æª¢æŸ¥é …ç›®ï¼š
- ç¢ºèª `tryFetchStock()` å‡½å¼é‚è¼¯
- æª¢æŸ¥ Counter ID æ ¼å¼æ˜¯å¦æ­£ç¢º
- é©—è­‰è‚¡ç¥¨é¡å‹è­˜åˆ¥é‚è¼¯
- æŸ¥çœ‹æ‰€æœ‰å˜—è©¦çš„éŒ¯èª¤è¨Šæ¯

## ğŸ“Š è³‡æ–™ä¾†æº

- **ä¸»è¦æ•¸æ“šæº**: [Lbkrs API](https://m-gl.lbkrs.com/) (æˆäº¤é¡æ’è¡Œã€åƒ¹æ ¼ã€æ¼²è·Œå¹…ã€ç”¢æ¥­åˆ†é¡)
- **çµ±ä¸€æ•¸æ“šæº**: Lbkrs Detail API (å®Œå…¨çµ±ä¸€ï¼Œç§»é™¤ Futunn ä¾è³´)
- **ç”¢æ¥­åˆ†é¡**: Lbkrs å…§å»ºç”¢æ¥­å­—æ®µ

## ğŸ›  æŠ€è¡“æ¶æ§‹

### æ ¸å¿ƒçµ„ä»¶ï¼ˆv2.4ï¼‰
- **CounterIdHelper**: Counter ID çµ±ä¸€ç®¡ç†ï¼ˆç”Ÿæˆã€è§£æã€å¸‚å ´è­˜åˆ¥ï¼‰
- **StockDataMapper**: çµ±ä¸€æ•¸æ“šæ˜ å°„ï¼ˆæ’è¡Œæ¦œ/è©³ç´° APIï¼‰
- **KlineDataProcessor**: Kç·šæ•¸æ“šè™•ç†ï¼ˆé©—è­‰ã€é‡å»ºã€ç²å–ï¼‰
- **RankingCache**: æ’è¡Œæ¦œå°ˆç”¨å¿«å–
- **WatchlistCache**: è‡ªé¸è‚¡ç¥¨å°ˆç”¨å¿«å–
- **KlineCache**: Kç·šæ•¸æ“šå°ˆç”¨å¿«å–
- **RequestQueue**: ä¸¦ç™¼è«‹æ±‚ç®¡ç†ï¼ˆå‹•æ…‹ä¸¦ç™¼æ§åˆ¶ï¼‰
- **DataFetcher**: HTTP è«‹æ±‚èˆ‡è§£æ
- **ColorCalculator**: è‰²å½©è¨ˆç®—èˆ‡å¿«å–

### å¿«å–ç­–ç•¥ï¼ˆv2.4 å„ªåŒ–ï¼‰
- **æ’è¡Œæ¦œ**: 1 åˆ†é˜ï¼ˆå³æ™‚æ›´æ–°ï¼‰
- **è‡ªé¸è‚¡ç¥¨**: 1 åˆ†é˜ï¼ˆç¨ç«‹å¿«å–ï¼‰
- **K ç·šæ•¸æ“š**: 1 åˆ†é˜ï¼ˆå°ˆç”¨å¿«å–ï¼‰
- **ç”¢æ¥­åˆ†é¡**: å¾ Lbkrs API ç›´æ¥ç²å–ï¼ˆç„¡éœ€å¿«å–ï¼‰

### æ¶æ§‹å„ªå‹¢ï¼ˆv2.4ï¼‰
- **æ¨¡çµ„åŒ–è¨­è¨ˆ**: å·¥å…·é¡åˆ†é›¢ï¼Œè·è²¬æ˜ç¢º
- **å°ˆæ¥­åŒ–å¿«å–**: ä¸‰ç¨®å¿«å–é¡å‹ï¼Œå„å¸å…¶è·
- **çµ±ä¸€æ•¸æ“šæº**: å®Œå…¨ç§»é™¤ Futunn API ä¾è³´
- **æ™ºèƒ½é›™æ¨¡å¼**: è‡ªé¸æ¨¡å¼å„ªå…ˆï¼Œç„¡è‡ªé¸æ™‚è‡ªå‹•å›é€€
- **å‹•æ…‹ä¸¦ç™¼æ§åˆ¶**: æ ¹æ“šè‚¡ç¥¨æ•¸é‡å‹•æ…‹èª¿æ•´ï¼ˆ5-30 å€‹ä¸¦ç™¼ï¼‰
- **å¤šè¼ªå˜—è©¦æ©Ÿåˆ¶**: æ™ºèƒ½ä¿®æ­£æµç¨‹ï¼Œæ”¯æ´ä»»æ„æ–°ETFä»£ç¢¼
- **å‘½åä¸€è‡´æ€§**: ä¿®æ­£æ‰€æœ‰æ‹¼å¯«éŒ¯èª¤ï¼Œçµ±ä¸€è®Šæ•¸å‘½å

### æ•ˆèƒ½å„ªåŒ–
- ä¸¦ç™¼è«‹æ±‚ä½‡åˆ—ï¼ˆå‹•æ…‹èª¿æ•´ 5-30 å€‹ä¸¦ç™¼ï¼‰
- è«‹æ±‚é‡è©¦æ©Ÿåˆ¶ï¼ˆæŒ‡æ•¸é€€é¿ï¼‰
- è‰²å½©è¨ˆç®—å¿«å–
- å¸‚å ´ç‰¹å®šå¿«å–ï¼ˆç¾è‚¡/æ¸¯è‚¡ç¨ç«‹ï¼‰
- åŸ·è¡Œæ™‚é–“ç›£æ§
- å°ˆæ¥­åŒ–å¿«å–ç³»çµ±ï¼ˆæ¸›å°‘ I/O æ“ä½œï¼‰

## ğŸ“ ç‰ˆæœ¬æ­·å²

### v2.4-Refactor (2025-11-06)
- ğŸ—ï¸ **æ¶æ§‹é‡æ§‹**: å‰µå»ºå·¥å…·é¡å’Œå°ˆæ¥­åŒ–å¿«å–ç³»çµ±
- ğŸ“ **å‘½åå„ªåŒ–**: ä¿®æ­£æ‰€æœ‰æ‹¼å¯«éŒ¯èª¤ï¼Œçµ±ä¸€è®Šæ•¸å‘½å
  - `tradeTrunover` â†’ `tradeTurnover`
  - `volumnRatio` â†’ `volumeRatio`
  - `priceNominal` â†’ `currentPrice`
  - `changeRatioNum` â†’ `changePercent`
- ğŸ”§ **å·¥å…·é¡è¨­è¨ˆ**: 
  - `CounterIdHelper`: çµ±ä¸€ Counter ID ç®¡ç†
  - `StockDataMapper`: çµ±ä¸€æ•¸æ“šæ˜ å°„
  - `KlineDataProcessor`: ç¨ç«‹ Kç·šè™•ç†
- ğŸ’¾ **å¿«å–å„ªåŒ–**: æ‹†åˆ†ç‚ºä¸‰å€‹å°ˆæ¥­åŒ–å¿«å–é¡
  - `RankingCache`: æ’è¡Œæ¦œå°ˆç”¨
  - `WatchlistCache`: è‡ªé¸è‚¡ç¥¨å°ˆç”¨
  - `KlineCache`: Kç·šæ•¸æ“šå°ˆç”¨
- ğŸ—‘ï¸ **ä»£ç¢¼ç°¡åŒ–**: æ¸›å°‘ 42% ä»£ç¢¼é‡ï¼Œç§»é™¤æ‰€æœ‰é‡è¤‡é‚è¼¯
- ğŸ› **DEBUG æ¨¡å¼**: æ–°å¢èª¿è©¦æ¨¡å¼é–‹é—œï¼Œæ§åˆ¶åŸå§‹æ•¸æ“šä¿ç•™
- âš¡ **æ•ˆèƒ½æå‡**: æ¸›å°‘é‡è¤‡è¨ˆç®—ï¼Œå„ªåŒ–å¿«å–ç­–ç•¥

### v2.3-Watchlist (2025-11-04)
- ğŸ¯ **è‡ªé¸è‚¡ç¥¨åŠŸèƒ½**: æ”¯æ´è‡ªå®šç¾©è‚¡ç¥¨æ¸…å–®
- ğŸŒ **è‡ªå‹•å¸‚å ´è­˜åˆ¥**: ç´”æ•¸å­—â†’æ¸¯è‚¡ï¼ŒåŒ…å«å­—æ¯â†’ç¾è‚¡
- ğŸ”„ **æ™ºèƒ½é›™æ¨¡å¼**: è‡ªé¸æ¨¡å¼å„ªå…ˆï¼Œç„¡è‡ªé¸æ™‚è‡ªå‹•å›é€€
- âš¡ **çµ±ä¸€æ•¸æ“šæº**: å®Œå…¨ç§»é™¤ Futunn API ä¾è³´
- ğŸ”§ **å¤šè¼ªå˜—è©¦æ©Ÿåˆ¶**: æ™ºèƒ½ä¿®æ­£æµç¨‹
- ğŸš€ **å‹•æ…‹ä¸¦ç™¼æ§åˆ¶**: æ ¹æ“šè‚¡ç¥¨æ•¸é‡å‹•æ…‹èª¿æ•´
- ğŸ—‘ï¸ **ç§»é™¤æœŸæ¬ŠåŠŸèƒ½**: ç°¡åŒ–ç•Œé¢

### v2.2-Lbkrs (2025-10-30)
- âœ¨ **æ•¸æ“šæºåˆ‡æ›**: å¾ Futunn åˆ‡æ›åˆ° Lbkrs API
- ğŸ—‘ï¸ **ç§»é™¤ TradingView**: ä½¿ç”¨ Lbkrs ç”¢æ¥­åˆ†é¡
- âš¡ **æ€§èƒ½å„ªåŒ–**: æ™ºèƒ½æ¬„ä½æª¢æ¸¬
- ğŸ¯ **æ™ºèƒ½ç”¢æ¥­åˆ†é¡**: ETF é¡¯ç¤ºå®Œæ•´åç¨±

### v2.1 (2025-10-20)
- âœ¨ æ–°å¢ K ç·šåœ–åŠŸèƒ½
- ğŸ¨ K ç·šé¡è‰²æ¡ç”¨ã€Œç¶ æ¼²ç´…è·Œã€é…è‰²

### v2.0 (2025-10-17)
- â™»ï¸ é‡æ§‹ç‚ºç‰©ä»¶å°å‘æ¶æ§‹
- âš¡ å„ªåŒ–ä¸¦ç™¼è«‹æ±‚ç®¡ç†

### v1.0 (2025-10-16)
- ğŸ‰ åˆå§‹ç‰ˆæœ¬ç™¼å¸ƒ

## ğŸ”„ å‡ç´šæŒ‡å—

### å¾ v2.3 å‡ç´šåˆ° v2.4
1. **å‚™ä»½ç•¶å‰ç‰ˆæœ¬**: ä¿å­˜èˆŠç‰ˆæœ¬ä½œç‚ºå‚™ä»½
2. **æ›¿æ›è…³æœ¬**: ä½¿ç”¨æ–°çš„ `Widget.js`
3. **æª¢æŸ¥é…ç½®**: ç¢ºèª `CUSTOM_WATCHLIST` ç­‰é…ç½®æ­£ç¢º
4. **æ¸…é™¤å¿«å–**: åˆªé™¤èˆŠçš„å¿«å–æª”æ¡ˆï¼ˆå¯é¸ï¼‰
5. **æ¸¬è©¦åŠŸèƒ½**: ç¢ºèªè‡ªé¸æ¨¡å¼å’Œæ’è¡Œæ¦œæ¨¡å¼éƒ½æ­£å¸¸

**æ³¨æ„**: v2.4 å®Œå…¨å…¼å®¹ v2.3 çš„é…ç½®ï¼Œç„¡éœ€ä¿®æ”¹é…ç½®å³å¯ä½¿ç”¨

### å¾ v2.2 å‡ç´šåˆ° v2.4
1. **æ–°å¢è‡ªé¸åŠŸèƒ½**: å¯é¸æ“‡æ€§æ·»åŠ  `CUSTOM_WATCHLIST` é…ç½®
2. **æª¢æŸ¥å‘½å**: æ³¨æ„å…§éƒ¨è®Šæ•¸åç¨±å·²å„ªåŒ–ï¼ˆä¸å½±éŸ¿ä½¿ç”¨ï¼‰
3. **æ¸…é™¤å¿«å–**: å»ºè­°æ¸…é™¤èˆŠå¿«å–ä»¥ä½¿ç”¨æ–°çš„å¿«å–ç³»çµ±
4. **æ¸¬è©¦æ€§èƒ½**: ç¢ºèªè¼‰å…¥é€Ÿåº¦å’Œç©©å®šæ€§

## ğŸ“ˆ æ€§èƒ½åŸºæº–ï¼ˆv2.4ï¼‰

### è¼‰å…¥æ™‚é–“ç›®æ¨™
- **è‡ªé¸æ¨¡å¼**: < 6 ç§’ï¼ˆ5æ”¯è‚¡ç¥¨ï¼‰- æå‡ 25%
- **æ’è¡Œæ¦œæ¨¡å¼**: < 4 ç§’ - æå‡ 20%
- **å¿«å–å‘½ä¸­**: < 0.5 ç§’ - æå‡ 50%

### API æˆåŠŸç‡ç›®æ¨™
- **Lbkrs æ’è¡Œæ¦œ API**: > 98%
- **Lbkrs Detail API**: > 95%
- **å¤šè¼ªå˜—è©¦æˆåŠŸç‡**: > 99%

### è³‡æºä½¿ç”¨
- **ä¸¦ç™¼è«‹æ±‚æ•¸**: 5-30ï¼ˆå‹•æ…‹èª¿æ•´ï¼‰
- **è¨˜æ†¶é«”ä½¿ç”¨**: < 40MBï¼ˆæ¸›å°‘ 20%ï¼‰
- **å¿«å–æª”æ¡ˆå¤§å°**: < 800KBï¼ˆå„ªåŒ– 20%ï¼‰

## ğŸ¤ è²¢ç»æŒ‡å—

æ­¡è¿æäº¤ Issue å’Œ Pull Requestï¼

### é–‹ç™¼ç’°å¢ƒ
1. Fork å°ˆæ¡ˆ
2. å‰µå»ºåŠŸèƒ½åˆ†æ”¯
3. æäº¤è®Šæ›´
4. æ¨é€åˆ°åˆ†æ”¯
5. å‰µå»º Pull Request

### ä»£ç¢¼è¦ç¯„
- ä½¿ç”¨ JavaScript (ES6+)
- éµå¾ªç¾æœ‰ä»£ç¢¼é¢¨æ ¼
- æ·»åŠ é©ç•¶çš„è¨»é‡‹
- ç¢ºä¿å‘ä¸‹ç›¸å®¹æ€§
- ä½¿ç”¨çµ±ä¸€çš„å‘½åè¦ç¯„

## â­ Star History

å¦‚æœé€™å€‹å°ˆæ¡ˆå°ä½ æœ‰å¹«åŠ©ï¼Œè«‹çµ¦å€‹ Star â­ï¸

---

<div align="center">

Made with â¤ï¸ by [hin88188]

[â¬† å›åˆ°é ‚éƒ¨](#iOS-Scriptable-Stock-Widget)

</div>